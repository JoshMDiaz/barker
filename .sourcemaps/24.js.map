{"version":3,"sources":["../../src/pages/layout/map/map-detail/map-detail.module.ts","../../src/pages/layout/map/map-detail/map-detail.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { MapDetailPage } from './map-detail';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MapDetailPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MapDetailPage),\r\n  ],\r\n  exports: [\r\n    MapDetailPage\r\n  ]\r\n})\r\nexport class MapDetailPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/layout/map/map-detail/map-detail.module.ts","import { Component,ViewChild,ElementRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams , AlertController , LoadingController, ToastController, ModalController , ViewController} from 'ionic-angular';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\nimport { AngularFireDatabase , FirebaseObjectObservable} from 'angularfire2/database-deprecated';\r\ndeclare var google;\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-map-detail',\r\n  templateUrl: 'map-detail.html'\r\n})\r\nexport class MapDetailPage {\r\n\r\n@ViewChild('map') mapElement: ElementRef;\r\n  map: any;\r\n  mapDetail: FirebaseObjectObservable<any>;\r\n\r\n  //***********  Map style  **************//\r\n  //*****  For more map styles    ********//\r\n  //*****  Go to snazzymaps.com   ********//\r\n  mapStyle: any = [{\"featureType\":\"landscape.man_made\",\"elementType\":\"all\",\"stylers\":[{\"color\":\"#faf5ed\"},{\"lightness\":\"0\"},{\"gamma\":\"1\"}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#bae5a6\"}]},{\"featureType\":\"road\",\"elementType\":\"all\",\"stylers\":[{\"weight\":\"1.00\"},{\"gamma\":\"1.8\"},{\"saturation\":\"0\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"hue\":\"#ffb200\"}]},{\"featureType\":\"road.arterial\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"lightness\":\"0\"},{\"gamma\":\"1\"}]},{\"featureType\":\"transit.station.airport\",\"elementType\":\"all\",\"stylers\":[{\"hue\":\"#b000ff\"},{\"saturation\":\"23\"},{\"lightness\":\"-4\"},{\"gamma\":\"0.80\"}]},{\"featureType\":\"water\",\"elementType\":\"all\",\"stylers\":[{\"color\":\"#a0daf2\"}]}];\r\n\r\n  mapId: any;\r\n  mapLat:number;\r\n  mapLng:number;\r\n  posLat:number;\r\n  posLng:number;\r\n\r\n  title: any;\r\n  description: any;\r\n  image: any\r\n  markers: any=[]; \r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,public alertCtrl: AlertController,public modalCtrl: ModalController, public loadingCtrl: LoadingController,private toastCtrl: ToastController,public viewCtrl: ViewController, public afDB: AngularFireDatabase, private geolocation: Geolocation) {\r\n\r\n    let loadingPopup = this.loadingCtrl.create({\r\n        spinner: 'crescent',\r\n        content: ''\r\n    });\r\n    loadingPopup.present();\r\n    this.mapId = navParams.get('mapId');\r\n    this.mapDetail = afDB.object(\"/map/\"+this.mapId);\r\n    this.mapDetail.subscribe(snapshots => {\r\n          this.image = snapshots.image;\r\n          this.title = snapshots.title;\r\n          this.description  = snapshots.description;\r\n          this.mapLat = snapshots.lat;\r\n          this.mapLng = snapshots.lng;\r\n\r\n          loadingPopup.dismiss();  \r\n      });\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.displayGoogleMap();\r\n  }\r\n\r\n  displayGoogleMap(){\r\n    let latLng = new google.maps.LatLng(this.mapLat, this.mapLng);\r\n    let mapOptions = {\r\n        center: latLng,\r\n        zoom: 15,\r\n        styles: this.mapStyle,\r\n        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n        disableDefaultUI: true\r\n    };\r\n    this.map = new google.maps.Map(this.mapElement.nativeElement, mapOptions);\r\n    this.addMarkersToMap()\r\n  }\r\n\r\n  addMarkersToMap() {\r\n      var position = new google.maps.LatLng(this.mapLat, this.mapLng);\r\n      var mapMarker = new google.maps.Marker({\r\n            position: position,\r\n            animation: google.maps.Animation.DROP,\r\n            markerSelected : true    \r\n      });\r\n      mapMarker.setMap(this.map);\r\n      this.markers.push(mapMarker);\r\n      this.map.setCenter(position);\r\n  }\r\n\r\n  calculateAndDisplayRoute() {\r\n      let loadingPopup = this.loadingCtrl.create({\r\n          spinner: 'crescent', \r\n          content: 'Finding...'\r\n      });\r\n      loadingPopup.present();\r\n      // get current position//\r\n      this.geolocation.getCurrentPosition().then((position) => {\r\n            this.posLat = position.coords.latitude;\r\n            this.posLng = position.coords.longitude;\r\n            let directionsService = new google.maps.DirectionsService;\r\n            let directionsDisplay = new google.maps.DirectionsRenderer({\r\n                polylineOptions: { strokeColor: \"#03a9f4\"}\r\n            });\r\n            \r\n            directionsDisplay.setMap(this.map);\r\n            directionsService.route({\r\n                origin: {lat:  this.posLat, lng: this.posLng},\r\n                destination: {lat: this.mapLat, lng: this.mapLng},\r\n                travelMode: 'DRIVING'\r\n            }, function(response, status) {\r\n                  if (status === 'OK') {\r\n\r\n                    console.log(\"directionsService OK\");\r\n                    directionsDisplay.setDirections(response);\r\n                    loadingPopup.dismiss();\r\n\r\n                  } else {\r\n                    \r\n                    loadingPopup.dismiss();\r\n                    alert(\"Directions request failed due to \"+status)\r\n                    console.log(\"Directions request failed due to \"+status);\r\n                  }\r\n            });    \r\n                  \r\n        }, (err) => {\r\n\r\n          loadingPopup.dismiss();\r\n          alert(\"User denied Geolocation\")\r\n          console.log(err);\r\n          \r\n        });    \r\n\r\n    }\r\n\r\n  getCurrentLocation(){\r\n        let loadingPopup = this.loadingCtrl.create({\r\n            content: 'Finding...'\r\n        });\r\n        loadingPopup.present();\r\n\r\n        this.geolocation.getCurrentPosition().then((position) => {\r\n            console.log(\"getCurrentPosition : true\");\r\n            let latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\r\n            this.map.setZoom(17);      // This will trigger a zoom_changed on the map\r\n            this.map.setCenter(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));\r\n            \r\n            let marker = new google.maps.Marker({\r\n                map: this.map,\r\n                icon: new google.maps.MarkerImage('//maps.gstatic.com/mapfiles/mobile/mobileimgs2.png',\r\n                new google.maps.Size(22, 22),\r\n                new google.maps.Point(0, 18),\r\n                new google.maps.Point(11, 11)),\r\n                position: latLng\r\n            });\r\n\r\n            let content = \"<h5>You are here</h5>\";\r\n            this.addInfoWindow(marker, content);\r\n            loadingPopup.dismiss();  \r\n\r\n        }, (err) => {\r\n            alert(\"User denied Geolocation\")\r\n            console.log(err);\r\n            loadingPopup.dismiss();  \r\n\r\n        });    \r\n\r\n  }\r\n \r\n  addInfoWindow(marker, content){\r\n      let infoWindow = new google.maps.InfoWindow({\r\n          content: content\r\n      });\r\n      google.maps.event.addListener(marker, 'click', () => {\r\n          infoWindow.open(this.map, marker);\r\n      });\r\n  }\r\n  \r\n  showDetail(mapId) {\r\n    let profileModal = this.modalCtrl.create('MapSubDetailPage', { \r\n        mapId: mapId\r\n    });\r\n    profileModal.present();\r\n  }\r\n\r\n  closeModal() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/layout/map/map-detail/map-detail.ts"],"sourceRoot":""}